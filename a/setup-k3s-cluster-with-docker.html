<!DOCTYPE html><html lang="zh-cn"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>Kubernetes 入门到实践：搭建 K3s 集群初体验 | 杨斌的博客</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="[object Object]"><meta name="designer" content="minfive"><meta name="keywords" content="杨斌,杨斌的博客,个人博客"><meta name="description" content="杨斌的个人博客"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="https://y0ngb1n.github.io/a/setup-k3s-cluster-with-docker.html"><link rel="icon" type="image/png" href="https://i.loli.net/2018/12/19/5c1a3b6b5d11e.png" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="杨斌的博客"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?69556429fe674dac8e9349e6e6c163ec";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131385132-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-131385132-1")</script><link rel="stylesheet" href="/scss/views/page/post.css"></head><body ontouchstart=""><div id="page-loading" class="page page-loading" style="background-image:url(https://loading.io/assets/img/hourglass.svg)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="杨斌的博客" alt="杨斌的博客"><img src="https://i.loli.net/2018/12/28/5c260d345cf24.png" alt="杨斌的博客"></a><nav class="page__nav"><ul class="nav__list clearfix"></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="https://cdn.jsdelivr.net/gh/y0ngb1n/image-hosting-01/images/2022-11-16-21-30-B950B9C1.png" alt="Kubernetes 入门到实践：搭建 K3s 集群初体验"></div><header class="post__info"><h1 class="post__title">Kubernetes 入门到实践：搭建 K3s 集群初体验</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="https://github.com/y0ngb1n">杨斌</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2022-11-16</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/docker/">Docker</a></li><li class="mark__item"><a href="/tags/k8s/">K8s</a></li><li class="mark__item"><a href="/tags/kubernetes/">Kubernetes</a></li><li class="mark__item"><a href="/tags/k3s/">K3s</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-eye"></i><ul class="mark__list clearfix"><li id="busuanzi_container_page_pv" class="mark__item"><span id="busuanzi_value_page_pv"></span>次</li></ul></div></div></header><div class="post__content"><h1 id="实践环境"><a class="markdownIt-Anchor" href="#实践环境"></a> 实践环境</h1><ul><li>Ubuntu 22.04</li><li>Docker 20.10.13</li><li><a href="https://github.com/k3s-io/k3s/releases/tag/v1.23.13%2Bk3s1" target="_blank" rel="noopener">K3s v1.23.13+k3s1</a></li></ul><p>本文将使用 Ubuntu 系统，如选择 Centos 系统，亦可作为参考，其步骤与命令大同小异，万变不离其宗。</p><blockquote><p>本文首发于：<a href="https://github.com/y0ngb1n/y0ngb1n.github.io" target="_blank" rel="noopener">https://github.com/y0ngb1n/y0ngb1n.github.io</a></p></blockquote><h1 id="安装-docker"><a class="markdownIt-Anchor" href="#安装-docker"></a> 安装 Docker</h1><p><a href="https://docs.rancher.cn/docs/k3s/advanced/_index/#%E4%BD%BF%E7%94%A8-docker-%E4%BD%9C%E4%B8%BA%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6" target="_blank" rel="noopener">K3s 包含并默认为 containerd， 一个行业标准的容器运行时。</a>本文将使用 Docker 作为容器运行时，需要提前安装 Docker 环境。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 更新软件源</span></span><br><span class="line">sudo apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换 root 用户</span></span><br><span class="line">sudo su -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 docker</span></span><br><span class="line">apt install docker.io</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 docker daemon</span></span><br><span class="line">systemctl <span class="built_in">enable</span> --now docker</span><br><span class="line">systemctl status docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证 docker 环境</span></span><br><span class="line">docker version &amp;&amp; docker info</span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure><p>后续启动 K3s 时使用<code>--docker</code> 选项激活。参考<a href="https://docs.rancher.cn/docs/k3s/advanced/_index/#%E4%BD%BF%E7%94%A8-docker-%E4%BD%9C%E4%B8%BA%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%B6" target="_blank" rel="noopener">使用 Docker 作为容器运行时</a>文档。</p><h1 id="安装-k3s"><a class="markdownIt-Anchor" href="#安装-k3s"></a> 安装 K3s</h1><blockquote><p><a href="https://github.com/k3s-io/k3s" target="_blank" rel="noopener">Lightweight Kubernetes. Production ready, easy to install, half the memory, all in a binary less than 100 MB.</a></p></blockquote><p>K3s 是一个高可用的、经过 CNCF 认证的轻量级 Kubernetes 发行版，专为物联网及边缘计算设计。</p><p><img src="https://cdn.jsdelivr.net/gh/y0ngb1n/image-hosting-01/images/2022-11-16-21-30-BCB83DF4.png" alt=""></p><p><code>k3s</code>  将安装 Kubernetes 所需的一切打包进仅有  <code>60MB</code> 大小的二进制文件中，并且完全实现了 Kubernetes API。为了减少运行 Kubernetes 所需的内存，<code>k3s</code> 删除了很多不必要的驱动程序，并用附加组件对其进行替换。由于它只需要极低的资源就可以运行，因此它能够在任何  <code>512MB</code>  内存以上的设备上运行集群。</p><p>我们先从简单的 K3s 上手，体验下 K8s 的一半 K3s。待 K3s 大法修炼成功后，我们再采用 <a href="https://github.com/kubernetes/kubeadm" target="_blank" rel="noopener">kubeadm</a> 进行部署高可用 Kubernetes 集群，其部署架构几乎一样，只是个别核心组件的变化，万变不离其宗，可依葫芦画瓢。</p><h2 id="方案一一键安装官方源需外网"><a class="markdownIt-Anchor" href="#方案一一键安装官方源需外网"></a> 方案一：一键安装（官方源，需外网）</h2><p>因 K3s 的核心组件镜像需从 <a href="http://gcr.io" target="_blank" rel="noopener">gcr.io</a> 拉取（国内网络不通），所以需具备外网访问的环境，适用于服务器均在国外的环境选用，简单粗暴一键安装。</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一键默认安装</span></span><br><span class="line">curl -sfL https://get.k3s.io | sh -</span><br></pre></td></tr></table></figure><h2 id="方案二一键安装国内源推荐"><a class="markdownIt-Anchor" href="#方案二一键安装国内源推荐"></a> 方案二：一键安装（国内源）推荐</h2><p>国内用户，可以使用以下方法加速安装，内置阿里云镜像源：</p><ul><li><a href="https://docs.rancher.cn/docs/k3s/installation/install-options/_index" target="_blank" rel="noopener">https://docs.rancher.cn/docs/k3s/installation/install-options/_index</a></li><li><a href="https://b23.tv/iGpYZQn" target="_blank" rel="noopener">https://b23.tv/iGpYZQn</a></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 指定 K3s 版本</span></span><br><span class="line"><span class="built_in">export</span> INSTALL_K3S_VERSION=v1.23.13+k3s1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义启动执行命令</span></span><br><span class="line"><span class="built_in">export</span> INSTALL_K3S_EXEC=<span class="string">"--docker"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 只安装不启动</span></span><br><span class="line"><span class="built_in">export</span> INSTALL_K3S_SKIP_START=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># https://docs.rancher.cn/docs/k3s/installation/installation-requirements/_index#先决条件</span></span><br><span class="line"><span class="comment"># 为您添加到集群的每个节点设计一个独特的名称</span></span><br><span class="line"><span class="built_in">export</span> K3S_NODE_NAME=k3s-node-01</span><br><span class="line"></span><br><span class="line"><span class="comment">###</span></span><br><span class="line"><span class="comment"># agent 需加上，其他保持一致</span></span><br><span class="line"><span class="comment">###</span></span><br><span class="line"><span class="comment"># 设置了 K3S_URL，它将默认为“agent”。如果未设置K3S_URL，它将默认为“server”</span></span><br><span class="line"><span class="built_in">export</span> K3S_URL=</span><br><span class="line"><span class="comment"># 用于将 server 或 agent 加入集群的共享 secret</span></span><br><span class="line"><span class="built_in">export</span> K3S_TOKEN=</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用阿里云镜像源安装</span></span><br><span class="line">curl -sfL https://rancher-mirror.oss-cn-beijing.aliyuncs.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 K3s 服务</span></span><br><span class="line">systemctl <span class="built_in">enable</span> --now k3s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看 K3s 服务状态</span></span><br><span class="line">systemctl status k3s</span><br></pre></td></tr></table></figure><h2 id="方案三离线安装"><a class="markdownIt-Anchor" href="#方案三离线安装"></a> 方案三：离线安装</h2><h3 id="前提条件"><a class="markdownIt-Anchor" href="#前提条件"></a> <a href="https://docs.rancher.cn/docs/k3s/installation/airgap/_index#%E5%AE%89%E8%A3%85-k3s" target="_blank" rel="noopener">前提条件</a></h3><ul><li>在安装 K3s 之前，完成上面的<a href="https://docs.rancher.cn/docs/k3s/installation/airgap/_index#%E9%83%A8%E7%BD%B2%E7%A7%81%E6%9C%89%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93" target="_blank" rel="noopener">部署私有镜像仓库</a>或<a href="https://docs.rancher.cn/docs/k3s/installation/airgap/_index#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2%E9%95%9C%E5%83%8F" target="_blank" rel="noopener">手动部署镜像</a>，导入安装 K3s 所需要的镜像。本小节将演示手动部署镜像的方式。</li><li>从 <a href="https://github.com/rancher/k3s/releases" target="_blank" rel="noopener">K3s GitHub Release</a> 页面下载 <a href="https://github.com/k3s-io/k3s/releases/tag/v1.23.13%2Bk3s1" target="_blank" rel="noopener">K3s v1.23.13+k3s1</a> 二进制文件，K3s 二进制文件需要与离线镜像的版本匹配。将二进制文件放在每个离线节点的 <code>/usr/local/bin</code> 中，并确保这个二进制文件是可执行的。</li><li>下载 K3s 安装脚本，将安装脚本放在每个离线节点的任意地方，并命名为 <code>install.sh</code>。</li></ul><p>当使用 <code>INSTALL_K3S_SKIP_DOWNLOAD</code> 环境变量运行 K3s 脚本时，K3s 将使用本地的脚本和二进制。</p><h3 id="手动部署镜像"><a class="markdownIt-Anchor" href="#手动部署镜像"></a> 手动部署镜像</h3><p>假设您已经在离线/国内环境中创建了节点。这种方法需要您手动将必要的镜像部署到每个节点，适用于运行无法部署镜像仓库的边缘部署场景。参考<a href="https://docs.rancher.cn/docs/k3s/installation/airgap/_index/#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2%E9%95%9C%E5%83%8F" target="_blank" rel="noopener">官方手动部署镜像</a>文档。</p><ol><li><p>从 <a href="https://github.com/rancher/k3s/releases" target="_blank" rel="noopener">K3s GitHub Release</a> 页面获取需安装的 <a href="https://github.com/k3s-io/k3s/releases/tag/v1.23.13%2Bk3s1" target="_blank" rel="noopener">K3s v1.23.13+k3s1</a> 的镜像 tar 文件。</p></li><li><p>将 tar 文件放在<code>images</code>目录下，例如：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 为每个节点创建离线镜像的存储文件夹</span></span><br><span class="line">sudo mkdir -p /var/lib/rancher/k3s/agent/images/</span><br><span class="line"></span><br><span class="line"><span class="comment"># $ARCH 是当前服务器的 CPU 架构</span></span><br><span class="line">sudo cp ./k3s-airgap-images-<span class="variable">$ARCH</span>.tar /var/lib/rancher/k3s/agent/images/</span><br></pre></td></tr></table></figure></li><li><p>需手动将镜像部署到每个节点，在每个节点执行上述操作。</p></li></ol><h3 id="下载-k3s-v12313k3s1-二进制文件"><a class="markdownIt-Anchor" href="#下载-k3s-v12313k3s1-二进制文件"></a> 下载 <a href="https://github.com/k3s-io/k3s/releases/tag/v1.23.13%2Bk3s1" target="_blank" rel="noopener">K3s v1.23.13+k3s1</a> 二进制文件</h3><p>从 <a href="https://github.com/rancher/k3s/releases" target="_blank" rel="noopener">K3s GitHub Release</a> 页面下载 <a href="https://github.com/k3s-io/k3s/releases/tag/v1.23.13%2Bk3s1" target="_blank" rel="noopener">K3s v1.23.13+k3s1</a> 二进制文件，K3s 二进制文件需要与离线镜像的版本匹配。将二进制文件放在每个离线节点的 <code>/usr/local/bin</code> 中，并确保这个二进制文件是可执行的。</p><h3 id="使用脚本安装"><a class="markdownIt-Anchor" href="#使用脚本安装"></a> 使用脚本安装</h3><p>安装脚本可从下面任一地址下载：</p><table><thead><tr><th>脚本地址</th><th>说明</th></tr></thead><tbody><tr><td><a href="https://get.k3s.io/" target="_blank" rel="noopener">https://get.k3s.io/</a></td><td>官方地址，需要外网环境</td></tr><tr><td><a href="https://rancher-mirror.oss-cn-beijing.aliyuncs.com/k3s/k3s-install.sh" target="_blank" rel="noopener">https://rancher-mirror.oss-cn-beijing.aliyuncs.com/k3s/k3s-install.sh</a></td><td>阿里源，内置阿里云镜像源</td></tr><tr><td><a href="https://raw.githubusercontent.com/k3s-io/k3s/master/install.sh" target="_blank" rel="noopener">https://raw.githubusercontent.com/k3s-io/k3s/master/install.sh</a></td><td>GitHub 地址，同官方源</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 下载脚本</span></span><br><span class="line">curl -sfL https://get.k3s.io &gt; install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换 root 用户</span></span><br><span class="line">sudo su -</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line">chmod +x install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 K3s，跳过下载二进制文件，只安装，不启动</span></span><br><span class="line">INSTALL_K3S_SKIP_DOWNLOAD=<span class="literal">true</span> INSTALL_K3S_SKIP_START=<span class="literal">true</span> ./install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动 K3s</span></span><br><span class="line">systemctl <span class="built_in">enable</span> --now k3s</span><br></pre></td></tr></table></figure><h1 id="验证-k3s"><a class="markdownIt-Anchor" href="#验证-k3s"></a> 验证 K3s</h1><h2 id="检查集群"><a class="markdownIt-Anchor" href="#检查集群"></a> 检查集群</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 查看集群的运行情况</span></span><br><span class="line">kubectl get nodes -owide</span><br><span class="line">kubectl get all -A -owide</span><br><span class="line">kubectl describe nodes k3s-node-01</span><br><span class="line">kubectl -n kube-system describe deploy coredns</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 Docker 作为运行时，会使用 docker 拉取镜像与运行容器</span></span><br><span class="line">docker images</span><br><span class="line">docker ps</span><br></pre></td></tr></table></figure><h2 id="牛刀小试"><a class="markdownIt-Anchor" href="#牛刀小试"></a> 牛刀小试</h2><h3 id="启动-whoami-服务"><a class="markdownIt-Anchor" href="#启动-whoami-服务"></a> 启动 whoami 服务</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 快速部署 whoami 应用，指定副本为 2，默认副本为 1</span></span><br><span class="line">kubectl create deploy whoami --image=traefik/whoami --replicas=2</span><br><span class="line">kubectl describe deploy whoami</span><br><span class="line"><span class="comment"># 监控 pod 状态，通过扩缩容可直观看到 pod 的调度情况</span></span><br><span class="line">kubectl get pods --watch</span><br><span class="line"><span class="comment"># 尝试下对 whoami 应用进行扩缩容</span></span><br><span class="line">kubectl scale deploy whoami --replicas=5</span><br></pre></td></tr></table></figure><h3 id="请求链路说明"><a class="markdownIt-Anchor" href="#请求链路说明"></a> 请求链路说明</h3><p>让我们尝试着理解下 k8s 的请求链路：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">request public-ip -&gt; node-port -&gt; svc-port -&gt; pod-port -&gt; container</span><br></pre></td></tr></table></figure><h3 id="通过-service-暴露给集群内部访问"><a class="markdownIt-Anchor" href="#通过-service-暴露给集群内部访问"></a> 通过 Service 暴露给集群内部访问</h3><p>默认为 NodePort 模式，会在每个节点监听</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl expose deploy whoami --port=80</span><br><span class="line">kubectl get svc -owide</span><br><span class="line">kubectl describe svc whoami</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在本地通过 service 多访问几次，出轮询访问 container</span></span><br><span class="line"><span class="comment"># curl http://&lt;external-ip&gt;:&lt;port&gt;</span></span><br><span class="line">$ curl `kubectl get -o template service/whoami --template=<span class="string">'&#123;&#123;.spec.clusterIP&#125;&#125;'</span>`</span><br><span class="line">Hostname: whoami-84d974bbd6-shqsr</span><br><span class="line">IP: 127.0.0.1</span><br><span class="line">IP: 10.42.0.13</span><br><span class="line">RemoteAddr: 10.42.0.1:42158</span><br><span class="line">GET / HTTP/1.1</span><br><span class="line">Host: 10.43.181.167</span><br><span class="line">User-Agent: curl/7.68.0</span><br><span class="line">Accept: */*</span><br></pre></td></tr></table></figure><h3 id="通过-service-暴露给集群外网访问"><a class="markdownIt-Anchor" href="#通过-service-暴露给集群外网访问"></a> 通过 Service 暴露给集群外网访问</h3><p>指定 LoadBalancer 模式并指定公网 IP</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 自行替换 &lt;PUBLIC_IP&gt; 为当前节点的公网 IP</span></span><br><span class="line">kubectl expose deploy whoami --<span class="built_in">type</span>=LoadBalancer --port=80 --external-ip &lt;PUBLIC_IP&gt;</span><br><span class="line"></span><br><span class="line">$ kubectl get svc whoami -owide</span><br><span class="line">NAME     TYPE           CLUSTER-IP     EXTERNAL-IP       PORT(S)        AGE   SELECTOR</span><br><span class="line">whoami   LoadBalancer   10.43.77.116   123.123.123.123   80:32101/TCP   16s   app=whoami</span><br><span class="line"></span><br><span class="line"><span class="comment"># 集群内部仍可正常访问</span></span><br><span class="line">curl 10.43.77.116</span><br><span class="line">curl `kubectl get -o template service/whoami --template=<span class="string">'&#123;&#123;.spec.clusterIP&#125;&#125;'</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过外网浏览器访问，需要开启云服务商的防火墙配置</span></span><br><span class="line"><span class="comment"># Ctrl + F5 多刷新几次查看效果</span></span><br><span class="line">http://123.123.123.123:32101</span><br></pre></td></tr></table></figure><h3 id="快速清理实验环境"><a class="markdownIt-Anchor" href="#快速清理实验环境"></a> 快速清理实验环境</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kubectl delete all --all</span><br></pre></td></tr></table></figure><h1 id="卸载-k3s"><a class="markdownIt-Anchor" href="#卸载-k3s"></a> <strong>卸载 K3s</strong></h1><ul><li><a href="https://docs.rancher.cn/docs/k3s/installation/uninstall/_index/" target="_blank" rel="noopener">https://docs.rancher.cn/docs/k3s/installation/uninstall/_index/</a></li></ul><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 一键卸载 server</span></span><br><span class="line">k3s-uninstall.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一键卸载 agent</span></span><br><span class="line">k3s-agent-uninstall.sh</span><br></pre></td></tr></table></figure><h1 id="参考链接"><a class="markdownIt-Anchor" href="#参考链接"></a> 参考链接</h1><ul><li><a href="https://www.k3s.io/" target="_blank" rel="noopener">https://www.k3s.io/</a></li><li><a href="https://docs.rancher.cn/k3s/" target="_blank" rel="noopener">https://docs.rancher.cn/k3s/</a></li><li><a href="http://zxc0328.github.io/2019/06/04/k3s-setup/" target="_blank" rel="noopener">http://zxc0328.github.io/2019/06/04/k3s-setup/</a></li><li><a href="https://icloudnative.io/posts/deploy-k3s-cross-public-cloud/" target="_blank" rel="noopener">https://icloudnative.io/posts/deploy-k3s-cross-public-cloud/</a></li><li><a href="https://b23.tv/iGpYZQn" target="_blank" rel="noopener">https://b23.tv/iGpYZQn</a></li></ul><div class="post-announce">感谢您的阅读，本文由 <a href="https://y0ngb1n.github.io">杨斌的博客</a> 版权所有。如若转载，请注明出处：杨斌的博客（<a href="https://y0ngb1n.github.io/a/setup-k3s-cluster-with-docker.html">https://y0ngb1n.github.io/a/setup-k3s-cluster-with-docker.html</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/a/running-local-Kubernetes-clusters-using-docker.html" title="使用 Docker 快速搭建单机版的 Kubernetes 集群"><i class="iconfont icon-prev"></i>使用 Docker 快速搭建单机版的 Kubernetes 集群</a></div><div class="post__prev post__prev--right"><a href="/a/setup-k3s-cluster-multicloud-with-wireguard.html" title="Kubernetes 入门到实践：借助 WireGuard 跨云搭建 K3s 集群环境">Kubernetes 入门到实践：借助 WireGuard 跨云搭建 K3s 集群环境<i class="iconfont icon-next"></i></a></div></div></div></article></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">简介</h3><p class="block__text">杨斌的个人博客</p></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/容器技术/">容器技术</a><span class="block-list-count">2</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Hexo-搭建个人博客/">Hexo 搭建个人博客</a><span class="block-list-count">5</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/a/setup-k3s-cluster-multicloud-with-wireguard.html" title="Kubernetes 入门到实践：借助 WireGuard 跨云搭建 K3s 集群环境"><div class="item__cover"><img src="https://cdn.jsdelivr.net/gh/y0ngb1n/image-hosting-01/images/2022-11-19-23-30-81C56943.png" alt="Kubernetes 入门到实践：借助 WireGuard 跨云搭建 K3s 集群环境"></div><div class="item__info"><h3 class="item__title">Kubernetes 入门到实践：借助 WireGuard 跨云搭建 K3s 集群环境</h3><span class="item__text">2022-11-19</span></div></a></li><li class="latest-post-item"><a href="/a/setup-k3s-cluster-with-docker.html" title="Kubernetes 入门到实践：搭建 K3s 集群初体验"><div class="item__cover"><img src="https://cdn.jsdelivr.net/gh/y0ngb1n/image-hosting-01/images/2022-11-16-21-30-B950B9C1.png" alt="Kubernetes 入门到实践：搭建 K3s 集群初体验"></div><div class="item__info"><h3 class="item__title">Kubernetes 入门到实践：搭建 K3s 集群初体验</h3><span class="item__text">2022-11-16</span></div></a></li><li class="latest-post-item"><a href="/a/running-local-Kubernetes-clusters-using-docker.html" title="使用 Docker 快速搭建单机版的 Kubernetes 集群"><div class="item__cover"><img src="https://s2.loli.net/2021/12/18/cAPfsvQCEGg8HKi.jpg" alt="使用 Docker 快速搭建单机版的 Kubernetes 集群"></div><div class="item__info"><h3 class="item__title">使用 Docker 快速搭建单机版的 Kubernetes 集群</h3><span class="item__text">2021-12-18</span></div></a></li><li class="latest-post-item"><a href="/a/samples-spring-boot-distributed-log-elk.html" title="使用 ELK 集中管理 Spring Boot 应用日志"><div class="item__cover"><img src="https://i.loli.net/2021/07/25/1OYoTetA4Mq2KQG.png" alt="使用 ELK 集中管理 Spring Boot 应用日志"></div><div class="item__info"><h3 class="item__title">使用 ELK 集中管理 Spring Boot 应用日志</h3><span class="item__text">2021-07-25</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/autoconfigure/">autoconfigure</a></li><li class="tag-item"><a class="tag-link" href="/tags/cnpm/">cnpm</a></li><li class="tag-item"><a class="tag-link" href="/tags/datasource/">datasource</a></li><li class="tag-item"><a class="tag-link" href="/tags/docker/">docker</a></li><li class="tag-item"><a class="tag-link" href="/tags/docker-hub/">docker-hub</a></li><li class="tag-item"><a class="tag-link" href="/tags/druid/">druid</a></li><li class="tag-item"><a class="tag-link" href="/tags/elasticsearch/">elasticsearch</a></li><li class="tag-item"><a class="tag-link" href="/tags/elk/">elk</a></li><li class="tag-item"><a class="tag-link" href="/tags/git-submodule/">git-submodule</a></li><li class="tag-item"><a class="tag-link" href="/tags/github-pages/">github-pages</a></li><li class="tag-item"><a class="tag-link" href="/tags/grafana/">grafana</a></li><li class="tag-item"><a class="tag-link" href="/tags/graphql/">graphql</a></li><li class="tag-item"><a class="tag-link" href="/tags/hello-world/">hello-world</a></li><li class="tag-item"><a class="tag-link" href="/tags/hexo/">hexo</a></li><li class="tag-item"><a class="tag-link" href="/tags/java/">java</a></li><li class="tag-item"><a class="tag-link" href="/tags/k3s/">k3s</a></li><li class="tag-item"><a class="tag-link" href="/tags/k8s/">k8s</a></li><li class="tag-item"><a class="tag-link" href="/tags/kibana/">kibana</a></li><li class="tag-item"><a class="tag-link" href="/tags/kind/">kind</a></li><li class="tag-item"><a class="tag-link" href="/tags/kubernetes/">kubernetes</a></li><li class="tag-item"><a class="tag-link" href="/tags/linux/">linux</a></li><li class="tag-item"><a class="tag-link" href="/tags/logstash/">logstash</a></li><li class="tag-item"><a class="tag-link" href="/tags/microk8s/">microk8s</a></li><li class="tag-item"><a class="tag-link" href="/tags/minikube/">minikube</a></li><li class="tag-item"><a class="tag-link" href="/tags/monitoring/">monitoring</a></li><li class="tag-item"><a class="tag-link" href="/tags/multi-datasource/">multi-datasource</a></li><li class="tag-item"><a class="tag-link" href="/tags/node-js/">node.js</a></li><li class="tag-item"><a class="tag-link" href="/tags/npm/">npm</a></li><li class="tag-item"><a class="tag-link" href="/tags/prometheus/">prometheus</a></li><li class="tag-item"><a class="tag-link" href="/tags/spring/">spring</a></li><li class="tag-item"><a class="tag-link" href="/tags/spring-boot/">spring-boot</a></li><li class="tag-item"><a class="tag-link" href="/tags/starter/">starter</a></li><li class="tag-item"><a class="tag-link" href="/tags/swagger/">swagger</a></li><li class="tag-item"><a class="tag-link" href="/tags/thymeleaf/">thymeleaf</a></li><li class="tag-item"><a class="tag-link" href="/tags/travis-ci/">travis-ci</a></li><li class="tag-item"><a class="tag-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-item"><a class="tag-link" href="/tags/url-shortener/">url-shortener</a></li><li class="tag-item"><a class="tag-link" href="/tags/wireguard/">wireguard</a></li><li class="tag-item"><a class="tag-link" href="/tags/个人博客/">个人博客</a></li><li class="tag-item"><a class="tag-link" href="/tags/容器技术/">容器技术</a></li><li class="tag-item"><a class="tag-link" href="/tags/转载/">转载</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="page__container footer__container"><div class="footer-top__item footer-top__item--2"><h3 class="item__title">关于</h3><div class="item__content"><p class="item__text">本站是基于 Hexo 搭建的静态资源博客，主要用于分享日常学习、生活及工作的一些心得总结，欢迎点击右下角订阅 RSS</p><ul class="footer__contact-info"><li class="contact-info__item"><i class="iconfont icon-address"></i> <span>Guangzhou, Guangdong Province, China</span></li><li class="contact-info__item"><i class="iconfont icon-email2"></i> <span>y0ngb1n@163.com</span></li></ul></div></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, made by <a href="https://github.com/Mrminfive" target="_blank">minfive</a>.</p><ul class="footer__social-network clearfix"><li class="social-network__item"><a href="https://github.com/y0ngb1n" target="_blank" title="github"><i class="iconfont icon-github"></i></a></li><li class="social-network__item"><a href="mailto:y0ngb1n.me@gmail.com" target="_blank" title="email"><i class="iconfont icon-email"></i></a></li><li class="social-network__item"><a href="/atom.xml" target="_blank" title="rss"><i class="iconfont icon-rss"></i></a></li></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script src="/js/common.js"></script><script src="/js/page/post.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>